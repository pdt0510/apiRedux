{"ast":null,"code":"// part 6\nimport { createAsyncThunk, createSlice, nanoid } from '@reduxjs/toolkit';\nimport axios from 'axios'; //reducer thunk, 16ms35ss\n\nexport const getTodos = createAsyncThunk('todos/todosFetched', async () => {\n  //17ms35ss\n  const response = await axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5');\n  return response.data;\n}); // 22ms42ss\n\nexport const addTodo = createAsyncThunk('todos/todoAdded', async title => {\n  const newTodo = {\n    id: nanoid(),\n    title,\n    completed: false\n  }; // 24ms25ss\n\n  await axios.post('https://jsonplaceholder.typicode.com/todos', newTodo);\n  return newTodo;\n}); //27ms40ss\n\nexport const deleteTodos = createAsyncThunk('todos/todoDeleted', async todoId => {\n  await axios.delete(`https://jsonplaceholder.typicode.com/todos/${todoId}`); //28ms58ss\n\n  return todoId;\n});\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState: {\n    allTodos: []\n  },\n  reducers: {\n    //addTodo: {},//25ms01ss\n    markComplete: (state, action) => {\n      const todoId = action.payload;\n      state.allTodos = state.allTodos.map(todo => {\n        if (todo.id === todoId) {\n          todo.completed = !todo.completed;\n        }\n\n        return todo;\n      });\n    },\n\n    // deleteTodo(state, action) { }, //29ms27ss\n    todosFetched(state, action) {}\n\n  },\n  //18ms58ss\n  extraReducers: {\n    //get all todos\n    [getTodos.pending]: (state, action) => {\n      // 19ms29ss\n      console.log('Fetching todos from backend...');\n    },\n    [getTodos.fulfilled]: (state, action) => {\n      // 20ms18ss\n      console.log('Done');\n      state.allTodos = action.payload;\n    },\n    [getTodos.rejected]: () => {\n      //20ms53ss\n      console.log('Failed to get todos !!!');\n    },\n    // Add todo, 25ms01ss\n    [addTodo.fulfilled]: (state, action) => {\n      state.allTodos.unshift(action.payload);\n    } // delete Todo\n\n  }\n}); // reducer\n\nconst todosReducer = todosSlice.reducer; // selector\n\nconst todosSelector = state => state.todosReducer.allTodos; // action, \n\n\nexport const {\n  //addTodo, //26ms25ss\n  markComplete // deleteTodo, //27ms40ss\n\n} = todosSlice.actions;\nexport { todosReducer, todosSelector };","map":{"version":3,"sources":["D:/LEARNING__________/17.ReactJs2021/phan9-Redux/redux-lesson/src/store/reducer/todosSlice.js"],"names":["createAsyncThunk","createSlice","nanoid","axios","getTodos","response","get","data","addTodo","title","newTodo","id","completed","post","deleteTodos","todoId","delete","todosSlice","name","initialState","allTodos","reducers","markComplete","state","action","payload","map","todo","todosFetched","extraReducers","pending","console","log","fulfilled","rejected","unshift","todosReducer","reducer","todosSelector","actions"],"mappings":"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","sourcesContent":["// part 6\r\nimport { createAsyncThunk, createSlice, nanoid } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\n//reducer thunk, 16ms35ss\r\nexport const getTodos = createAsyncThunk(\r\n    'todos/todosFetched', async () => { //17ms35ss\r\n        const response = await axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5');\r\n        return response.data;\r\n    });\r\n\r\n// 22ms42ss\r\nexport const addTodo = createAsyncThunk(\r\n    'todos/todoAdded', async (title) => {\r\n        const newTodo = {\r\n            id: nanoid(),\r\n            title,\r\n            completed: false,\r\n        }\r\n\r\n        // 24ms25ss\r\n        await axios.post('https://jsonplaceholder.typicode.com/todos', newTodo);\r\n        return newTodo;\r\n    })\r\n\r\n//27ms40ss\r\nexport const deleteTodos = createAsyncThunk(\r\n    'todos/todoDeleted', async (todoId) => {\r\n        await axios.delete(`https://jsonplaceholder.typicode.com/todos/${todoId}`);//28ms58ss\r\n        return todoId;\r\n    });\r\n\r\nconst todosSlice = createSlice({\r\n    name: 'todos',\r\n    initialState: {\r\n        allTodos: []\r\n    },\r\n    reducers: {\r\n        //addTodo: {},//25ms01ss\r\n        markComplete: (state, action) => {\r\n            const todoId = action.payload;\r\n            state.allTodos = state.allTodos.map(todo => {\r\n                if (todo.id === todoId) {\r\n                    todo.completed = !todo.completed;\r\n                }\r\n                return todo;\r\n            })\r\n        },\r\n        // deleteTodo(state, action) { }, //29ms27ss\r\n        todosFetched(state, action) {\r\n        }\r\n    },\r\n    //18ms58ss\r\n    extraReducers: {\r\n        //get all todos\r\n        [getTodos.pending]: (state, action) => { // 19ms29ss\r\n            console.log('Fetching todos from backend...');\r\n        },\r\n        [getTodos.fulfilled]: (state, action) => { // 20ms18ss\r\n            console.log('Done');\r\n            state.allTodos = action.payload;\r\n        },\r\n        [getTodos.rejected]: () => { //20ms53ss\r\n            console.log('Failed to get todos !!!');\r\n        },\r\n        // Add todo, 25ms01ss\r\n        [addTodo.fulfilled]: (state, action) => {\r\n            state.allTodos.unshift(action.payload);\r\n        }\r\n        // delete Todo\r\n    }\r\n})\r\n\r\n// reducer\r\nconst todosReducer = todosSlice.reducer\r\n\r\n// selector\r\nconst todosSelector = state => state.todosReducer.allTodos;\r\n\r\n// action, \r\nexport const {\r\n    //addTodo, //26ms25ss\r\n    markComplete,\r\n    // deleteTodo, //27ms40ss\r\n} = todosSlice.actions;\r\n\r\nexport { todosReducer, todosSelector };\r\n\r\n"]},"metadata":{},"sourceType":"module"}