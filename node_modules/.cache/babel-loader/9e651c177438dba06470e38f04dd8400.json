{"ast":null,"code":"// part 6\nimport { createAsyncThunk, createSlice, nanoid } from '@reduxjs/toolkit';\nimport axios from 'axios'; //reducer thunk, 16ms35ss\n\nexport const getTodos = createAsyncThunk('todos/todosFetched', async () => {\n  //17ms35ss\n  const response = await axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5');\n  return response.data;\n});\nconst todosSlice = createSlice({\n  name: 'todos',\n  initialState: {\n    allTodos: []\n  },\n  reducers: {\n    addTodo: {\n      reducer(state, action) {\n        state.allTodos.unshift(action.payload);\n      },\n\n      prepare(title) {\n        return {\n          payload: {\n            id: nanoid(),\n            title,\n            completed: false\n          }\n        };\n      }\n\n    },\n    markComplete: (state, action) => {\n      const todoId = action.payload;\n      state.allTodos = state.allTodos.map(todo => {\n        if (todo.id === todoId) {\n          todo.completed = !todo.completed;\n        }\n\n        return todo;\n      });\n    },\n\n    deleteTodo(state, action) {\n      const todoId = action.payload;\n      state.allTodos = state.allTodos.filter(todo => todo.id !== todoId);\n    },\n\n    todosFetched(state, action) {\n      state.allTodos = action.payload;\n    }\n\n  },\n  //18ms58ss\n  extraReducers: {\n    [getTodos.pending]: (state, action) => {\n      // 19ms29ss\n      console.log('Fetching todos from backend...');\n    },\n    [getTodos.fulfilled]: (state, action) => {\n      // 20ms18ss\n      console.log('Done');\n      state.all;\n    }\n  }\n}); // Async action creator, action and redicer dispatch,\n// export const getTodos = () => async dispatch => {\n//     try {\n//         const response = await axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5');\n//         dispatch(todosFetched(response.data));\n//     } catch (error) {\n//         console.log(error);\n//     }\n// }\n// reducer\n\nconst todosReducer = todosSlice.reducer; // selector\n\nconst todosSelector = state => state.todosReducer.allTodos; // action,\n\n\nexport const {\n  addTodo,\n  markComplete,\n  deleteTodo,\n  todosFetched\n} = todosSlice.actions;\nexport { todosReducer, todosSelector };","map":{"version":3,"sources":["D:/LEARNING__________/17.ReactJs2021/phan9-Redux/redux-lesson/src/store/reducer/todosSlice.js"],"names":["createAsyncThunk","createSlice","nanoid","axios","getTodos","response","get","data","todosSlice","name","initialState","allTodos","reducers","addTodo","reducer","state","action","unshift","payload","prepare","title","id","completed","markComplete","todoId","map","todo","deleteTodo","filter","todosFetched","extraReducers","pending","console","log","fulfilled","all","todosReducer","todosSelector","actions"],"mappings":"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","sourcesContent":["// part 6\r\nimport { createAsyncThunk, createSlice, nanoid } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\n//reducer thunk, 16ms35ss\r\nexport const getTodos = createAsyncThunk(\r\n    'todos/todosFetched', async () => { //17ms35ss\r\n        const response = await axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5');\r\n        return response.data;\r\n    });\r\n\r\n\r\nconst todosSlice = createSlice({\r\n    name: 'todos',\r\n    initialState: {\r\n        allTodos: []\r\n    },\r\n    reducers: {\r\n        addTodo: {\r\n            reducer(state, action) {\r\n                state.allTodos.unshift(action.payload);\r\n            },\r\n            prepare(title) {\r\n                return {\r\n                    payload: {\r\n                        id: nanoid(),\r\n                        title,\r\n                        completed: false,\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        markComplete: (state, action) => {\r\n            const todoId = action.payload;\r\n            state.allTodos = state.allTodos.map(todo => {\r\n                if (todo.id === todoId) {\r\n                    todo.completed = !todo.completed;\r\n                }\r\n                return todo;\r\n            })\r\n        },\r\n        deleteTodo(state, action) {\r\n            const todoId = action.payload;\r\n            state.allTodos =\r\n                state.allTodos.filter(todo => todo.id !== todoId);\r\n        },\r\n        todosFetched(state, action) {\r\n            state.allTodos = action.payload;\r\n        }\r\n    },\r\n    //18ms58ss\r\n    extraReducers: {\r\n        [getTodos.pending]: (state, action) => { // 19ms29ss\r\n            console.log('Fetching todos from backend...');\r\n        },\r\n        [getTodos.fulfilled]: (state, action) => { // 20ms18ss\r\n            console.log('Done');\r\n            state.all\r\n        }\r\n    }\r\n})\r\n\r\n// Async action creator, action and redicer dispatch,\r\n// export const getTodos = () => async dispatch => {\r\n//     try {\r\n//         const response = await axios.get('https://jsonplaceholder.typicode.com/todos?_limit=5');\r\n\r\n//         dispatch(todosFetched(response.data));\r\n//     } catch (error) {\r\n//         console.log(error);\r\n//     }\r\n// }\r\n\r\n// reducer\r\nconst todosReducer = todosSlice.reducer\r\n\r\n// selector\r\nconst todosSelector = state => state.todosReducer.allTodos;\r\n\r\n// action,\r\nexport const { addTodo, markComplete, deleteTodo, todosFetched } = todosSlice.actions;\r\n\r\nexport { todosReducer, todosSelector };\r\n\r\n"]},"metadata":{},"sourceType":"module"}